language: android
sudo: required

matrix:
  include:
    - language: android
      install: true
      install:
        - echo y | android update sdk -u -a -t tools
        - echo y | android update sdk -u -a -t platform-tools
        - echo y | android update sdk -u -a -t build-tools-28.0.3
        - echo y | android update sdk -u -a -t android-26
        - echo y | android update sdk -u -a -t extra-google-m2repository
        - echo y | android update sdk -u -a -t extra-android-m2repository
      # os: linux
      # jdk: oraclejdk8
      android:
        components:
          - sys-img-x86_64-android-26
      before_install:
        # - curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.1/install.sh | bash
        # - nvm install 8
        # - node --version
        # - npm --version
        # - npm install -g appium
        - echo y | android update sdk -a --no-ui --filter android-26
        - echo y | android update sdk -a --no-ui --filter sys-img-x86_64-android-26
        - android list targets | grep -E '^id:' | awk -F '"' '{$1=""; print $2}' # list all targets
        - echo no | android create avd --force -n test -t android-26 --abi x86_64
        - emulator -avd test -no-skin -no-window &
        - android-wait-for-emulator
        # - adb shell input keyevent 82 &
        # - adb wait-for-device get-serialno
        # - sleep 100
        # - chmod +x gradlew
        # - ./gradlew --version
        # - echo y |adb devices

      script:
        - echo y |adb devices
        # - ./gradlew clean build uiAutomationTest -x test -x signArchives
